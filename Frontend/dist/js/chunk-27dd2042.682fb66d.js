(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27dd2042"],{"0852":function(t,a,e){},"6bdb":function(t,a,e){},9638:function(t,a,e){"use strict";var r=e("0852"),i=e.n(r);i.a},c7ec:function(t,a,e){"use strict";var r=e("6bdb"),i=e.n(r);i.a},d8bb:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home"},[e("Header"),e("BatteryTab")],1)},i=[],n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("CurrentBattery",{attrs:{battery:t.battery}}),e("Graph",{ref:"graph",attrs:{batteryId:t.batteryId}})],1)},c=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"chartdiv",staticClass:"chart"})},o=[],d=(e("cb29"),e("d81d"),e("4e82"),e("b0c0"),e("b680"),e("71c9")),h=e("c497"),l=e("5a54"),u=e("bc3a"),p=e.n(u);d["c"](l["a"]);var b={name:"Graph",data:function(){return{graphData:[]}},params:["batteryId"],methods:{initSeries:function(t,a,e){var r=this.chart.yAxes.push(new h["d"]),i=this.chart.series.push(new h["c"]);i.dataFields.valueY=t.toLowerCase(),i.dataFields.dateX="date",i.strokeWidth=3,i.fillOpacity=0,i.stroke=a,i.fill=a,i.name=t,i.unit=e,i.yAxis=r,i.tooltipText="{name}: [bold]{valueY} {unit}[/]",r.renderer.line.strokeOpacity=1,r.renderer.line.strokeWidth=2,r.renderer.line.stroke=i.stroke,r.renderer.labels.template.fill=i.stroke,r.renderer.grid.template.disabled=!0},addData:function(t,a){this.chart.addData({date:a,capacity:t.toFixed(2)})}},mounted:function(){var t=this,a=d["b"](this.$refs.chartdiv,h["e"]);a.paddingRight=20,this.chart=a,d["c"](l["a"]),this.dateAxis=this.chart.xAxes.push(new h["a"]),this.dateAxis.renderer.grid.template.location=0,this.dateAxis.renderer.minGridDistance=100,this.dateAxis.groupData=!0,this.chart.scrollbarX=new d["a"],this.chart.scrollbarX.paddingLeft=20,this.chart.scrollbarX.paddingRight=20,this.initSeries("Capacity","#0000EE","kWh"),this.chart.cursor=new h["f"],this.chart.cursor.behavior="zoomX",this.chart.cursor.lineX.disabled=!0,this.chart.legend=new h["b"],this.chart.legend.labels.template.text="[bold {color}]{name} ({unit})[/]",this.dateAxis.start=.8,this.dateAxis.keepSelection=!0,p.a.get("http://localhost/api/storageEvent",{params:{storageId:this.$attrs.batteryId},headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(a){function e(t){return{capacity:t.currentCapacity.toFixed(2),date:Date.parse(t.timestamp)}}var r=a.data.map(e);r.sort((function(t,a){return t.time-a.date})),t.chart.addData(r)})).catch((function(a){t.flash(a,"error")}))},beforeDestroy:function(){this.chart&&this.chart.dispose()}},y=b,f=(e("c7ec"),e("2877")),m=Object(f["a"])(y,s,o,!1,null,"23d94216",null),v=m.exports,g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"current-battery"}},[e("div",[e("b",[t._v(" Current Capacity: ")]),t._v(" "),e("span",[t._v(t._s(t.battery.currentCapacity.toFixed(2))+" kWh ")]),e("br"),e("b",[t._v(" Max Capacity: ")]),t._v(" "),e("span",[t._v(t._s(t.battery.maxCapacity.toFixed(2))+" kWh ")]),e("br"),e("b",[t._v(" Fill Percentage: ")]),t._v(" "),e("span",[t._v(t._s((t.battery.currentCapacity/t.battery.maxCapacity).toFixed(2))+" % ")]),e("br")])])},x=[],C={name:"CurrentBattery",props:["battery"]},_=C,w=(e("9638"),Object(f["a"])(_,g,x,!1,null,"0ebf77cc",null)),k=w.exports,I={name:"BatteryTab",components:{CurrentBattery:k,Graph:v},data:function(){return{battery:{currentCapacity:0,maxCapacity:100},batteryId:this.$route.query.id}},mounted:function(){this.$nextTick((function(){var t=this;p.a.get("http://localhost/api/storage/"+this.batteryId,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(a){t.battery.currentCapacity=a.data[0].currentCapacity,t.battery.maxCapacity=a.data[0].maxCapacity})).catch((function(a){t.flash(a,"error")})),setInterval((function(){p.a.get("http://localhost/api/storageEvent/latest",{params:{storageId:t.batteryId},headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(a){t.battery.currentCapacity=a.data[0].currentCapacity,t.$refs.graph.addData(a.data[0].currentCapacity,Date.parse(a.data[0].timestamp))})).catch((function(a){t.flash(a,"error")}))}),1e3)}))}},A=I,D=Object(f["a"])(A,n,c,!1,null,null,null),B=D.exports,$={name:"home",components:{BatteryTab:B}},E=$,F=Object(f["a"])(E,r,i,!1,null,null,null);a["default"]=F.exports}}]);
//# sourceMappingURL=chunk-27dd2042.682fb66d.js.map