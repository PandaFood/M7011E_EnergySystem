(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-313b9540"],{"0316":function(t,e,a){},"4f26":function(t,e,a){"use strict";var r=a("0316"),n=a.n(r);n.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),c="["+n+"]",i=RegExp("^"+c+c+"*"),o=RegExp(c+c+"*$"),s=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:s(1),end:s(2),trim:s(3)}},"598d":function(t,e,a){"use strict";var r=a("9bc9"),n=a.n(r);n.a},"7fa2":function(t,e,a){},"992e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Header"),a("ControlPanel")],1)},n=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"control-panel"}},[a("div",{attrs:{id:"button-div"}},[a("h1",[t._v(" Coal Plant Control ")]),a("button",{staticClass:"button",attrs:{disabled:t.disableStart},on:{click:t.startCoalPlant}},[t._v("Start Coal Plant")]),a("button",{staticClass:"button",attrs:{disabled:t.disableStop},on:{click:t.stopCoalPlant}},[t._v("Stop Coal Plant")])]),a("CurrentState",{attrs:{coalPlant:t.coalPlant,price:t.price}}),a("BatteryControl",{attrs:{coalPlant:t.coalPlant,batteryPercentage:t.batteryPercentage}}),a("PriceControl",{attrs:{price:t.price}})],1)},i=[],o=a("bc3a"),s=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"current-state"}},[a("h1",[t._v(" Current State ")]),a("div",[a("b",[t._v(" Coal Plant Status: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.status)+" ")]),a("br"),a("b",[t._v(" Current Coal Capacity: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.currentCapacity.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Max Coal Capacity: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.maxCapacity.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Battery Percentage: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.batteryPercentage)+"% ")]),a("br"),a("b",[t._v(" Current House Consumption: ")]),t._v(" "),a("span",[t._v(t._s(t.currentConsumption.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" System Power: ")]),t._v(" "),a("span",[t._v(t._s(t.currentPower.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Current Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.currentPrice.toFixed(2))+" sek/kWh ")]),a("br")])])},u=[],d=(a("e25e"),{name:"CurrentState",props:["coalPlant","price"],data:function(){return{currentConsumption:0,currentPower:0,interval:{}}},mounted:function(){this.$nextTick((function(){var t=this;this.interval=setInterval((function(){s.a.get("/api/house",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.currentConsumption=e.data.reduce((function(t,e){return t+parseInt(e.consumption)}),0)})),s.a.get("/api/systemPower",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.currentPower=e.data.power}))}),1e3)}))},destroyed:function(){clearInterval(this.interval)}}),p=d,v=(a("be41"),a("2877")),h=Object(v["a"])(p,l,u,!1,null,"79c5d402",null),P=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"battery-control"}},[a("h1",[t._v(" Battery Control ")]),a("p",[t._v(" Set how much of generated power should go to the battery: ")]),a("div",{attrs:{id:"slider-div"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.percentage,expression:"percentage"}],attrs:{type:"range",name:"percent",min:"0",max:"100"},domProps:{value:t.percentage},on:{__r:function(e){t.percentage=e.target.value}}}),a("h2",[t._v(" "+t._s(t.percentage)+" % ")])]),a("button",{staticClass:"button",on:{click:t.updatePercentage}},[t._v("Update")])])},b=[],m={name:"BatteryControl",props:["coalPlant","batteryPercentage"],data:function(){return{percentage:this.batteryPercentage,loadNew:!0}},methods:{updatePercentage:function(){var t=this,e={newPercentage:this.percentage/100};s.a.post("/api/coal/battery",{data:e},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.loadNew=!0,t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}},watch:{batteryPercentage:function(t){this.loadNew&&(this.percentage=t,this.loadNew=!1)}}},_=m,g=(a("c6e3"),Object(v["a"])(_,f,b,!1,null,"2d1b91d8",null)),C=g.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"price-control"}},[a("h1",[t._v("Price Control ")]),a("div",{attrs:{id:"price-div"}},[a("div",{attrs:{id:"current-price"}},[a("b",[t._v(" Current Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.currentPrice.toFixed(2))+" sek/kWh ")]),a("br"),a("b",[t._v(" Calculated Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.calculatedPrice.toFixed(2))+" sek/kWh ")]),a("br")]),a("div",{attrs:{id:"price-input"}},[a("label",{attrs:{id:"number"}},[t._v("New Manual Price: "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice,expression:"newPrice"}],attrs:{type:"number",min:"0"},domProps:{value:t.newPrice},on:{input:function(e){e.target.composing||(t.newPrice=e.target.value)}}}),t._v(" Sek/kWh ")]),a("br"),a("br"),a("label",{attrs:{id:"checkbox"}},[t._v("Use Calculated Price "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.useCalculatedPrice,expression:"useCalculatedPrice"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.useCalculatedPrice)?t._i(t.useCalculatedPrice,null)>-1:t.useCalculatedPrice},on:{change:function(e){var a=t.useCalculatedPrice,r=e.target,n=!!r.checked;if(Array.isArray(a)){var c=null,i=t._i(a,c);r.checked?i<0&&(t.useCalculatedPrice=a.concat([c])):i>-1&&(t.useCalculatedPrice=a.slice(0,i).concat(a.slice(i+1)))}else t.useCalculatedPrice=n}}})])]),a("button",{staticClass:"button",on:{click:t.updatePrice}},[t._v("Update")])])])},y=[],x={name:"PriceControl",props:["price"],data:function(){return{newPrice:0,useCalculatedPrice:!1}},methods:{updatePrice:function(){var t=this,e={price:this.newPrice,useCalculatedPrice:this.useCalculatedPrice};s.a.post("/api/currentPrice",{data:e},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}},watch:{newPrice:function(t){t<0?(this.newPrice=0,this.flash("Price set to negative value","warning")):""==t?(this.newPrice=0,this.flash("Price is not a number","warning")):this.newPrice=parseInt(t)}}},k=x,S=(a("598d"),Object(v["a"])(k,w,y,!1,null,"51c705fe",null)),I=S.exports,j={name:"ControlPanel",components:{CurrentState:P,BatteryControl:C,PriceControl:I},data:function(){return{coalPlant:{status:"down",currentCapacity:0,maxCapacity:0,batteryPercentage:0},batteryPercentage:0,price:{currentPrice:0,calculatedPrice:0},interval:{}}},mounted:function(){this.$nextTick((function(){var t=this;this.interval=setInterval((function(){s.a.get("/api/coal/status",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.coalPlant.currentCapacity=e.data.capacity,t.coalPlant.maxCapacity=e.data.maxCapacity,t.coalPlant.status=e.data.status,t.coalPlant.batteryPercentage=100*e.data.batteryPercentage,t.batteryPercentage=100*e.data.batteryPercentage})),s.a.get("/api/currentPrice",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.price.currentPrice=e.data.price,t.price.calculatedPrice=e.data.calculatedPrice}))}),1e3)}))},methods:{startCoalPlant:function(){var t=this;s.a.post("/api/coal/start",{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))},stopCoalPlant:function(){var t=this;s.a.post("/api/coal/stop",{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}},computed:{disableStart:function(){return"down"!=this.coalPlant.status},disableStop:function(){return"up"!=this.coalPlant.status}},destroyed:function(){clearInterval(this.interval)}},B=j,A=(a("4f26"),Object(v["a"])(B,c,i,!1,null,"6bd9bcbc",null)),z=A.exports,N={name:"manager",components:{ControlPanel:z}},W=N,$=Object(v["a"])(W,r,n,!1,null,null,null);e["default"]=$.exports},"9bc9":function(t,e,a){},be41:function(t,e,a){"use strict";var r=a("7fa2"),n=a.n(r);n.a},c6e3:function(t,e,a){"use strict";var r=a("ca22"),n=a.n(r);n.a},ca22:function(t,e,a){},e25e:function(t,e,a){var r=a("23e7"),n=a("e583");r({global:!0,forced:parseInt!=n},{parseInt:n})},e583:function(t,e,a){var r=a("da84"),n=a("58a8").trim,c=a("5899"),i=r.parseInt,o=/^[+-]?0[Xx]/,s=8!==i(c+"08")||22!==i(c+"0x16");t.exports=s?function(t,e){var a=n(String(t));return i(a,e>>>0||(o.test(a)?16:10))}:i}}]);
//# sourceMappingURL=chunk-313b9540.d3f61fe6.js.map