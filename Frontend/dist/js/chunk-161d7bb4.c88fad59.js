(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-161d7bb4"],{"3d5d":function(t,e,a){},"56eb":function(t,e,a){"use strict";var r=a("9dc7"),n=a.n(r);n.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),c="["+n+"]",o=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),s=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(i,"")),a}};t.exports={start:s(1),end:s(2),trim:s(3)}},"76b4":function(t,e,a){},"992e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Header"),a("ControlPanel")],1)},n=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"control-panel"}},[a("div",{attrs:{id:"button-div"}},[a("h1",[t._v(" Coal Plant Control ")]),a("button",{staticClass:"button",attrs:{disabled:t.disableStart},on:{click:t.startCoalPlant}},[t._v("Start Coal Plant")]),a("button",{staticClass:"button",attrs:{disabled:t.disableStop},on:{click:t.stopCoalPlant}},[t._v("Stop Coal Plant")])]),a("CurrentState",{attrs:{coalPlant:t.coalPlant,price:t.price}}),a("BatteryControl",{attrs:{coalPlant:t.coalPlant}}),a("PriceControl",{attrs:{price:t.price}})],1)},o=[],i=a("bc3a"),s=a.n(i),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"current-state"}},[a("h1",[t._v(" Current State ")]),a("div",[a("b",[t._v(" Coal Plant Status: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.status)+" ")]),a("br"),a("b",[t._v(" Current Coal Capacity: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.currentCapacity.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Max Coal Capacity: ")]),t._v(" "),a("span",[t._v(t._s(t.coalPlant.maxCapacity.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Buffer Percentage: ")]),t._v(" "),a("span",[t._v(t._s(100*t.coalPlant.batteryPercentage.toFixed(2))+"% ")]),a("br"),a("b",[t._v(" Current House Consumption: ")]),t._v(" "),a("span",[t._v(t._s(t.currentConsumption.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" System Power: ")]),t._v(" "),a("span",[t._v(t._s(t.currentPower.toFixed(2))+" kWh ")]),a("br"),a("b",[t._v(" Current Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.currentPrice.toFixed(2))+" sek/kWh ")]),a("br")])])},u=[],d=(a("e25e"),{name:"CurrentState",props:["coalPlant","price"],data:function(){return{currentConsumption:0,currentPower:0}},mounted:function(){this.$nextTick((function(){var t=this;setInterval((function(){s.a.get("http://localhost/api/house",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.currentConsumption=e.data.reduce((function(t,e){return t+parseInt(e.consumption)}),0)})),s.a.get("http://localhost/api/systemPower",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.currentPower=e.data.power}))}),1e3)}))}}),p=d,h=(a("f45d"),a("2877")),P=Object(h["a"])(p,l,u,!1,null,"f4d2eda4",null),v=P.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"battery-control"}},[a("h1",[t._v(" Battery Control ")]),a("p",[t._v(" Set how much of generated power should go to the battery: ")]),a("div",{attrs:{id:"slider-div"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPercentage,expression:"newPercentage"}],attrs:{type:"range",name:"percent",min:"0",max:"100"},domProps:{value:t.newPercentage},on:{__r:function(e){t.newPercentage=e.target.value}}}),a("h2",[t._v(" "+t._s(this.newPercentage)+" % ")])]),a("button",{staticClass:"button",on:{click:t.updatePercentage}},[t._v("Update")])])},b=[],m={name:"BatteryControl",props:["coalPlant"],data:function(){return{newPercentage:100*this.coalPlant.batteryPercentage}},methods:{updatePercentage:function(){var t=this,e={newPercentage:this.newPercentage/100};s.a.post("http://localhost/api/coal/battery",{},{data:e,headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}}},_=m,C=(a("56eb"),Object(h["a"])(_,f,b,!1,null,"715cf9b5",null)),g=C.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"price-control"}},[a("h1",[t._v("Price Control ")]),a("div",{attrs:{id:"price-div"}},[a("div",{attrs:{id:"current-price"}},[a("b",[t._v(" Current Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.currentPrice.toFixed(2))+" sek/kWh ")]),a("br"),a("b",[t._v(" Calculated Price: ")]),t._v(" "),a("span",[t._v(t._s(t.price.calculatedPrice.toFixed(2))+" sek/kWh ")]),a("br")]),a("div",{attrs:{id:"price-input"}},[a("label",{attrs:{id:"number"}},[t._v("New Manual Price: "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice,expression:"newPrice"}],attrs:{type:"number",min:"0"},domProps:{value:t.newPrice},on:{input:function(e){e.target.composing||(t.newPrice=e.target.value)}}}),t._v(" Sek/kWh ")]),a("br"),a("br"),a("label",{attrs:{id:"checkbox"}},[t._v("Use Calculated Price "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.useCalculatedPrice,expression:"useCalculatedPrice"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.useCalculatedPrice)?t._i(t.useCalculatedPrice,null)>-1:t.useCalculatedPrice},on:{change:function(e){var a=t.useCalculatedPrice,r=e.target,n=!!r.checked;if(Array.isArray(a)){var c=null,o=t._i(a,c);r.checked?o<0&&(t.useCalculatedPrice=a.concat([c])):o>-1&&(t.useCalculatedPrice=a.slice(0,o).concat(a.slice(o+1)))}else t.useCalculatedPrice=n}}})])]),a("button",{staticClass:"button",on:{click:t.updatePrice}},[t._v("Update")])])])},x=[],y={name:"PriceControl",props:["price"],data:function(){return{newPrice:0,useCalculatedPrice:!1}},methods:{updatePrice:function(){var t=this,e={price:this.newPrice,useCalculatedPrice:this.useCalculatedPrice};s.a.post("http://localhost/api/currentPrice",{},{data:e,headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}},watch:{newPrice:function(t){t<0?(this.newPrice=0,this.flash("Price set to negative value","warning")):""==t?(this.newPrice=0,this.flash("Price is not a number","warning")):this.newPrice=parseInt(t)}}},k=y,S=(a("cb8b"),Object(h["a"])(k,w,x,!1,null,"501e0dd4",null)),I=S.exports,j={name:"ControlPanel",components:{CurrentState:v,BatteryControl:g,PriceControl:I},data:function(){return{coalPlant:{status:"down",currentCapacity:0,maxCapacity:0,batteryPercentage:0},price:{currentPrice:0,calculatedPrice:0}}},mounted:function(){this.$nextTick((function(){var t=this;setInterval((function(){s.a.get("http://localhost/api/coal/status",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.coalPlant.currentCapacity=e.data.capacity,t.coalPlant.maxCapacity=e.data.maxCapacity,t.coalPlant.status=e.data.status,t.coalPlant.batteryPercentage=e.data.batteryPercentage})),s.a.get("http://localhost/api/currentPrice",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.price.currentPrice=e.data.price,t.price.calculatedPrice=e.data.calculatedPrice}))}),1e3)}))},methods:{startCoalPlant:function(){var t=this;s.a.post("http://localhost/api/coal/start",{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))},stopCoalPlant:function(){var t=this;s.a.post("http://localhost/api/coal/stop",{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t.flash(e.data,"success")})).catch((function(e){t.flash(e.response.data,"error")}))}},computed:{disableStart:function(){return"down"!=this.coalPlant.status},disableStop:function(){return"up"!=this.coalPlant.status}}},B=j,A=(a("ae47"),Object(h["a"])(B,c,o,!1,null,"2eefb751",null)),z=A.exports,F={name:"manager",components:{ControlPanel:z}},W=F,$=Object(h["a"])(W,r,n,!1,null,null,null);e["default"]=$.exports},"9dc7":function(t,e,a){},ae47:function(t,e,a){"use strict";var r=a("76b4"),n=a.n(r);n.a},b6a2:function(t,e,a){},cb8b:function(t,e,a){"use strict";var r=a("3d5d"),n=a.n(r);n.a},e25e:function(t,e,a){var r=a("23e7"),n=a("e583");r({global:!0,forced:parseInt!=n},{parseInt:n})},e583:function(t,e,a){var r=a("da84"),n=a("58a8").trim,c=a("5899"),o=r.parseInt,i=/^[+-]?0[Xx]/,s=8!==o(c+"08")||22!==o(c+"0x16");t.exports=s?function(t,e){var a=n(String(t));return o(a,e>>>0||(i.test(a)?16:10))}:o},f45d:function(t,e,a){"use strict";var r=a("b6a2"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-161d7bb4.c88fad59.js.map